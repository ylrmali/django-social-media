
{% for post in posts %}
    <div class="post">
        <!-- user photo and username -->
        <div class="post-header">
            <div class="row gap-1 m-412 align-items-center">
                {% if post.owner.profile_photo %}
                    <img class="user_photo"  src="{{ post.owner.profile_photo.url }}" alt="" >
                {% endif %}
                <a href="" class="post_owner">
                    <p  style="color:white;">{{ post.owner }}</p>
                </a>
            </div>
        </div>
        <!-- post content (image or text) -->
        <div class="post-body mb-3">
            <!-- post image -->
            {% if post.post_media %}
                <img src="{{ post.post_media.url }}" style="width: 100%;" alt="post_image">
            {% endif %}
            <!-- post action section ( like-comment-share) -->
            <div class="post-action">
                <div class="row align-items-center m-412 gap-1">
                    <!-- like button -->
                    <div class="like" id="like">
                        <!-- like click event -->
                        <div hx-get="{% url 'mainapp:like_control' post_id=post.id user_id=user.id %}"
                             hx-trigger="every 0.5s"
                             hx-target="#likeIcon-{{ post.id }}"
                             hx-swap="innerHTML">
                        </div>

                        <!-- like control -->
                        <div hx-get="{% url 'mainapp:like_control' post_id=post.id user_id=user.id %}"
                             hx-trigger="load"
                             hx-target="#likeIcon-{{ post.id }}"
                             hx-swap="innerHTML">
                        </div>

                        <!-- when user click like button -> like function will be work -->
                        <a hx-get="{% url 'mainapp:like' post.id %}"
                           hx-trigger="click"
                           hx-target="#like_count-{{ post.id }}"
                           id="like">
{#                             <i class="fa-regular fa-heart action-icon" id="likeIcon-{{ post.id }}"></i>#}
                            <div id="likeIcon-{{ post.id }}"></div>
                        </a>
                    </div>
                    <!-- comment button -->
                    <div class="comment">
                        <a href="{% url 'mainapp:post_detail' post.id %}">
                            <i class="fa-regular fa-comment action-icon"></i>
                        </a>
                    </div>
                    <!-- share button -->
                    <div class="share">
                        <i class="fa-solid fa-reply action-icon"></i>
                    </div>
                </div>
            </div>

            <!-- post like count -->
            <div class="like-count m-812">
                <p style="color: white"> <span id="like_count-{{ post.id }}">{{ post.like_owner.count }}</span> likes</p>
            </div>

            <!-- post text -->
            <p class="text m-812" style="color:white;">
                <a href="" class="username_link " style="color: white;">{{ post.owner }}</a>
                {{ post.post_text }}
            </p>

            <!-- comment count -->
            <div class="comment-count m-812">
                    <div hx-get="{% url 'mainapp:post_comment' post.id %}"
                         hx-trigger="load"
                         hx-target="#comment-{{ post.id }}"
                         hx-swap="innerHTML">
                    </div>
                    <div class="comment_count">
                        <a href="{% url 'mainapp:post_detail' post.id %}"
                           style="color: #a2a2a2;margin: 0;text-decoration: none;">
                            <span id="comment-{{ post.id }}"></span> comments...
                        </a>
                    </div>
            </div>
        </div>
    </div>
{% endfor %}



